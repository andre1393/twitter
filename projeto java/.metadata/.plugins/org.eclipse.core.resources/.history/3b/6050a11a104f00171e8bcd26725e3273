import java.util.List;

import twitter4j.Query;
import twitter4j.QueryResult;
import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.conf.ConfigurationBuilder;

/**
 * Implentação dos métodos para leitura dos dados do twitter
 * @author André Oliveira
 */
public class TwitterAPI {
	
	ConfigurationBuilder cb;
	ConfigurationBuilder cb_stream;
	public TwitterAPI(String consumerKey, String consumerSecret, 
					  String accessToken, String accessTokenSecret)
	{
		cb = new ConfigurationBuilder();
		cb_stream = new ConfigurationBuilder();
		
		cb.setDebugEnabled(true)
		.setOAuthConsumerKey(consumerKey)
		.setOAuthConsumerSecret(consumerSecret)
		.setOAuthAccessToken(accessToken)
		.setOAuthAccessTokenSecret(accessTokenSecret);
		
		cb_stream.setDebugEnabled(true)
		.setOAuthConsumerKey(consumerKey)
		.setOAuthConsumerSecret(consumerSecret)
		.setOAuthAccessToken(accessToken)
		.setOAuthAccessTokenSecret(accessTokenSecret);
	}
	public String getLastTweet()
	{	
		// configuração de autenticação
		ConfigurationBuilder cb_ = new ConfigurationBuilder();
		
    	
        Twitter twitterSearch = new TwitterFactory(cb_.build()).getInstance();
        try 
        {
        	for(int i = 0; i < keyWords.length; i++)
        	{
        		Query querySearch = new Query(keyWords[i]);
        		querySearch.count(100);
        		QueryResult resultSearch = twitterSearch.search(querySearch);
        		List<Status> tweets = resultSearch.getTweets();
        		for (Status tweetSearch : tweets) {
        			System.out.println(params[0] + "@" + tweetSearch.getUser().getScreenName() + 
        							   params[1] + tweetSearch.getText() + 
        							   params[2] + tweetSearch.getId());
        		}
                
        	}
        } catch (TwitterException err) {
            err.printStackTrace();
            System.out.println("Falha ao pesquisar pelo tweet: " + err.getMessage());
        }

	}
}
